# drako Profile: UFW Administration
# A toolkit for managing the Uncomplicated Firewall (ufw), common on Debian/Ubuntu.

# ┌─ Grid Dimensions ──────────────────────────────┐
x = 2
y = 2
# └────────────────────────────────────────────────┘

# ┌─ Control & Status (A,0) ───────────────────────┐
[[commands]]
name = "⚙️ Control & Status"
col = "A"
row = 0
items = [
    { 
      name = "Install UFW", 
      description = "Installs UFW on Debian or Arch based systems.",
      command = """
#!/bin/sh
if command -v apt-get >/dev/null 2>&1; then
    sudo apt-get update && sudo apt-get install -y ufw
elif command -v pacman >/dev/null 2>&1; then
    sudo pacman -Syu --noconfirm && sudo pacman -S --noconfirm ufw
else
    printf '\n[ERROR] This profile is for Debian or Arch based systems.\n' >&2
    exit 1
fi
      """
    },
    { name = "✅ Enable Firewall", description = "Turns the firewall on.", command = "sudo ufw enable" },
    { name = "❌ Disable Firewall", description = "Turns the firewall off.", command = "sudo ufw disable" },
    { name = "📊 Status Verbose", description = "Show detailed firewall status and rules.", command = "sudo ufw status verbose" },
    { name = "🔢 Status Numbered", description = "Show rules with numbers for easy deletion.", command = "sudo ufw status numbered" }
]

# ┌─ Rule Management (B,0) ────────────────────────┐
[[commands]]
name = "🛠️ Rule Management"
col = "B"
row = 0
items = [
    { 
      name = "Allow Port", 
      description = "Allow traffic on a specific port.",
      command = "printf 'Enter port/protocol (e.g., 80/tcp): '; read -r rule && sudo ufw allow \"$rule\""
    },
    { 
      name = "Deny Port", 
      description = "Deny traffic on a specific port.",
      command = "printf 'Enter port/protocol (e.g., 21/tcp): '; read -r rule && sudo ufw deny \"$rule\""
    },
    { 
      name = "Delete Rule", 
      description = "Delete a rule by its number (see 'Status Numbered').",
      command = "printf 'Enter rule number to delete: '; read -r num && sudo ufw delete \"$num\""
    }
]

# ┌─ Common Presets (A,1) ─────────────────────────┐
[[commands]]
name = "🚀 Common Presets"
col = "A"
row = 1
items = [
    { name = "Allow SSH", command = "sudo ufw allow ssh" },
    { name = "Allow HTTP", command = "sudo ufw allow http" },
    { name = "Allow HTTPS", command = "sudo ufw allow https" }
]

# ┌─ Logging & Reset (B,1) ────────────────────────┐
[[commands]]
name = "📜 Logging & Reset"
col = "B"
row = 1
items = [
    { name = "Enable Logging", command = "sudo ufw logging on" },
    { name = "Disable Logging", command = "sudo ufw logging off" },
    { name = "‼️ Reset Firewall", description = "Resets firewall to default state. All rules will be lost.", command = "sudo ufw reset" }
]

