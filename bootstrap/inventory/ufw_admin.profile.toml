# drako Profile: UFW Administration
# A toolkit for managing the Uncomplicated Firewall (ufw), common on Debian/Ubuntu.

# â”Œâ”€ Grid Dimensions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
x = 2
y = 2
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# â”Œâ”€ Control & Status (A,0) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
[[commands]]
name = "âš™ï¸ Control & Status"
col = "A"
row = 0

[[commands.items]]
name = "Install UFW"
description = "Installs UFW on Debian or Arch based systems."
auto_close_execution = false
command = """
#!/bin/sh
if command -v apt-get >/dev/null 2>&1;
then
    sudo apt-get update && sudo apt-get install -y ufw
elif command -v pacman >/dev/null 2>&1;
then
    sudo pacman -Syu --noconfirm && sudo pacman -S --noconfirm ufw
else
    printf '\n[ERROR] This profile is for Debian or Arch based systems.\n' >&2
    exit 1
fi
"""

[[commands.items]]
name = "âœ… Enable Firewall"
description = "Turns the firewall on."
command = "sudo ufw enable"
auto_close_execution = false

[[commands.items]]
name = "âŒ Disable Firewall"
description = "Turns the firewall off."
command = "sudo ufw disable"
auto_close_execution = false

[[commands.items]]
name = "ğŸ“Š Status Verbose"
description = "Show detailed firewall status and rules."
command = "sudo ufw status verbose"
auto_close_execution = false

[[commands.items]]
name = "ğŸ”¢ Status Numbered"
description = "Show rules with numbers for easy deletion."
command = "sudo ufw status numbered"
auto_close_execution = false

# â”Œâ”€ Rule Management (B,0) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
[[commands]]
name = "ğŸ› ï¸ Rule Management"
col = "B"
row = 0

[[commands.items]]
name = "Allow Port"
description = "Allow traffic on a specific port."
command = "printf 'Enter port/protocol (e.g., 80/tcp): '; read -r rule && sudo ufw allow \"$rule\""
auto_close_execution = false

[[commands.items]]
name = "Deny Port"
description = "Deny traffic on a specific port."
command = "printf 'Enter port/protocol (e.g., 21/tcp): '; read -r rule && sudo ufw deny \"$rule\""
auto_close_execution = false

[[commands.items]]
name = "Delete Rule"
description = "Delete a rule by its number (see 'Status Numbered')."
command = "printf 'Enter rule number to delete: '; read -r num && sudo ufw delete \"$num\""
auto_close_execution = false

# â”Œâ”€ Common Presets (A,1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
[[commands]]
name = "ğŸš€ Common Presets"
col = "A"
row = 1

[[commands.items]]
name = "Allow SSH"
command = "sudo ufw allow ssh"
auto_close_execution = false

[[commands.items]]
name = "Allow HTTP"
command = "sudo ufw allow http"
auto_close_execution = false

[[commands.items]]
name = "Allow HTTPS"
command = "sudo ufw allow https"
auto_close_execution = false

# â”Œâ”€ Logging & Reset (B,1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
[[commands]]
name = "ğŸ“œ Logging & Reset"
col = "B"
row = 1

[[commands.items]]
name = "Enable Logging"
command = "sudo ufw logging on"
auto_close_execution = false

[[commands.items]]
name = "Disable Logging"
command = "sudo ufw logging off"
auto_close_execution = false

[[commands.items]]
name = "â€¼ï¸ Reset Firewall"
description = "Resets firewall to default state. All rules will be lost."
command = "sudo ufw reset"
auto_close_execution = false