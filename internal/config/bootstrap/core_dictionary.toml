# Drako Core Command Dictionary
# This file maps the 'name' of a command to its platform-specific implementation.


# ==================================================================
# ==================================================================

["â¬†ï¸ System Update"]
linux_debian = "sudo apt update && sudo apt upgrade"
linux_arch = "sudo pacman -Su"
linux_fedora = "sudo dnf upgrade"
macos = "brew upgrade"
windows = "winget upgrade --all"

["Clean Packages"]
linux_debian = "sudo apt autoremove"
linux_arch = "sudo pacman -Sc"
linux_fedora = "sudo dnf autoremove"
macos = "brew cleanup"
windows = "echo 'Windows handles cleanup automatically'"


# ==================================================================
# ==================================================================

["Virus Scan (Home)"]
# clamscan: The command-line virus scanner itself.

# -r (Recursive): Tells the scanner to not just look at the files inside your Home folder, but to go into every sub-folder (Documents, Downloads, Desktop, etc.) and scan those too.

# --bell: Triggers a system sound (beep) if a virus is found. Useful if you want to leave the scan running in the background and just listen for alerts.

# -i (Infected): This stands for "Infected only." By default, clamscan prints every single safe file it checks, which creates a messy wall of text. This flag forces it to stay silent unless it finds a virus.

# $HOME: This is a variable that points to your current user's home directory (e.g., /home/username or /Users/username).
linux_arch = "sudo freshclam && clamscan -r --bell -i $HOME"
linux_fedora = "sudo freshclam && clamscan -r --bell -i $HOME"
linux_debian = """
# Check if ClamAV is installed first
if ! command -v freshclam &> /dev/null || ! command -v clamscan &> /dev/null; then
    echo "âŒ Error: ClamAV is not installed. Run the install command from Cell [C-0] first."
    sleep 1
    exit 1
fi

echo "ðŸ›¡ï¸  Initiating Security Protocol..."
echo "-----------------------------------"

# Step 1: Update
echo "ðŸ“¦ [1/2] Updating Virus Definitions..."
sudo freshclam || echo "âš ï¸  Update had warnings, proceeding to scan anyway..."

# Step 2: Scan
echo "-----------------------------------"
echo "ðŸ” [2/2] Scanning $HOME recursively..."
echo "â„¹ï¸  NOTE: The scanner is in 'Infected-Only' mode."
echo "â„¹ï¸  NOTE: In this mode, silence is GOOD. You will only see output if a threat is detected."
echo "â³  Scanning now (this may take several minutes)..."

# Run scan
clamscan -r --bell -i "$HOME"

echo "-----------------------------------"
echo "âœ… Scan complete."
"""


macos = "echo 'No virus scanning needed by default'"
windows = "Start-Process 'C:\\Program Files\\Windows Defender\\MpCmdRun.exe' -ArgumentList '-Scan -ScanType 2'"
# ==================================================================
# ==================================================================

["ðŸ‘€ Process Monitor"]

# TODO : 3in1
linux_arch = """
btop 2>/dev/null || {
    echo "btop not available. Defaulting to top..."
    top
}
"""

linux_debian = """
btop 2>/dev/null || {
    echo "btop not available. Defaulting to top..."
    top
}
"""

linux_fedora = """
btop 2>/dev/null || {
    echo "btop not available. Defaulting to top..."
    top
}
"""

# MacOS
# Logic: Falls back to 'top -o cpu' which is better for Mac
macos = """
btop 2>/dev/null || {
    echo "btop not available. Defaulting to top..."
    top -o cpu
}
"""
windows = "taskmgr"


# ==================================================================
# ==================================================================

[" ðŸ”Ž File Finder"]
# TODO : lf/ranger?
# TODO : 3in1
linux_debian = "find . -type f | fzf"
linux_arch = "find . -type f | fzf"
linux_fedora = "find . -type f | fzf"
macos = "find . -type f | grep -v .git"
windows = "gci -Recurse | Where-Object { ! $_.PSIsContainer } | Out-GridView"

["ðŸŒ Bandwidth"]
linux_debian = "bmon"
linux_arch = "bmon"
linux_fedora = "bmon"
macos = "nettop -P -L 1"
windows = "typeperf \"\\Network Interface(*)\\Bytes Total/sec\""

["System Info"]
linux_debian = "neofetch"
linux_arch = "neofetch"
linux_fedora = "neofetch"
macos = "system_profiler SPSoftwareDataType SPDetailLevel=mini"
windows = "systeminfo"

["Disk Usage"]
linux_debian = "duf"
linux_arch = "duf"
linux_fedora = "duf"
macos = "du -h -d 1"
windows = "drako internal open-url ms-settings:storage"

["Weather"]
linux_debian = "curl wttr.in"
linux_arch = "curl wttr.in"
linux_fedora = "curl wttr.in"
macos = "curl wttr.in"
windows = "curl wttr.in"


# ==================================================================
# ==================================================================

["Install common tools"]
linux_debian = "sudo apt install btop bmon duf neofetch clamav fzf "
linux_arch = "sudo pacman -Su btop neofetch clamav fzf bmon"
linux_fedora = "sudo dnf install btop neofetch clamav fzf bmon"
macos = "brew install btop neofetch fzf bmon"
windows = "winget install btop neofetch clamav fzf bmon"

["Install micro"]
linux_debian = "sudo apt install micro"
linux_arch = "sudo pacman -Su micro"
linux_fedora = "sudo dnf install micro"
macos = "brew install micro"
windows = "winget install micro"

["Set micro as EDITOR"]
linux_debian = "echo 'export EDITOR=micro' >> ~/.bashrc"
linux_arch = "echo 'export EDITOR=micro' >> ~/.bashrc"
linux_fedora = "echo 'export EDITOR=micro' >> ~/.bashrc"
macos = "echo 'export EDITOR=micro' >> ~/.zshrc"
windows = "setx EDITOR micro"

["ðŸ“œ Open Shell Config"]
linux_debian = "$EDITOR ~/.bashrc"
linux_arch = "$EDITOR ~/.bashrc"
linux_fedora = "$EDITOR ~/.bashrc"
macos = "$EDITOR ~/.zshrc"
windows = "drako open $PROFILE"


# ==================================================================
# ==================================================================

["âš™ï¸ Edit config.toml"]
linux_debian = "$EDITOR ~/.config/drako/config.toml"
linux_arch = "$EDITOR ~/.config/drako/config.toml"
linux_fedora = "$EDITOR ~/.config/drako/config.toml"
macos = "$EDITOR ~/.config/drako/config.toml"
windows = "drako open %APPDATA%\\drako\\config.toml"

["ðŸ“ Browse config dir"]
linux_debian = "$EDITOR ~/.config/drako"
linux_arch = "$EDITOR ~/.config/drako"
linux_fedora = "$EDITOR ~/.config/drako"
macos = "$EDITOR ~/.config/drako"
windows = "drako open %APPDATA%\\drako"

["â„¹ï¸ Open Pivots"]
linux_debian = "$EDITOR ~/.config/drako/pivot.toml"
linux_arch = "$EDITOR ~/.config/drako/pivot.toml"
linux_fedora = "$EDITOR ~/.config/drako/pivot.toml"
macos = "$EDITOR ~/.config/drako/pivot.toml"
windows = "drako open %APPDATA%\\drako\\pivot.toml"


# ==================================================================
# ==================================================================

["Alias x=drako"]
linux_debian = "echo \"alias x='~/go/bin/drako'\" >> ~/.bashrc && echo \"Alias added to ~/.bashrc. Restart shell to use 'x'.\""
linux_arch = "echo \"alias x='~/go/bin/drako'\" >> ~/.bashrc && echo \"Alias added to ~/.bashrc. Restart shell to use 'x'.\""
linux_fedora = "echo \"alias x='~/go/bin/drako'\" >> ~/.bashrc && echo \"Alias added to ~/.bashrc. Restart shell to use 'x'.\""
macos = "echo \"alias x='~/go/bin/drako'\" >> ~/.zshrc && echo \"Alias added. Restart shell to use 'x'.\""
windows = "echo 'Function x { & \"$env:USERPROFILE\\go\\bin\\drako.exe\" }' >> $PROFILE"

["Go Version"]
linux_debian = "go version"
linux_arch = "go version"
linux_fedora = "go version"
macos = "go version"
windows = "go version"  

